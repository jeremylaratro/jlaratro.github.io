<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bash Scripting for Pentesting | J Laratro</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/effects.css">
    <link rel="stylesheet" href="../../css/pages.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Share+Tech+Mono&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .blog-post-content { max-width: 900px; margin: 0 auto; }
        .blog-post-header { margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border-color); }
        .blog-post-title { font-family: var(--font-display); font-size: 2rem; color: var(--text-primary); margin-bottom: 1rem; }
        .blog-post-meta { display: flex; gap: 2rem; flex-wrap: wrap; font-family: var(--font-mono); font-size: 0.85rem; color: var(--text-muted); }
        .blog-post-body { font-size: 1rem; line-height: 1.8; color: var(--text-secondary); }
        .blog-post-body h2 { font-family: var(--font-display); font-size: 1.5rem; color: var(--accent-blue); margin: 2.5rem 0 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); }
        .blog-post-body h3 { font-family: var(--font-display); font-size: 1.2rem; color: var(--text-primary); margin: 2rem 0 1rem; }
        .blog-post-body h4 { font-family: var(--font-display); font-size: 1rem; color: var(--accent-green); margin: 1.5rem 0 0.75rem; }
        .blog-post-body p { margin-bottom: 1rem; }
        .blog-post-body pre { background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 6px; padding: 1rem; overflow-x: auto; margin: 1rem 0 1.5rem; font-family: var(--font-mono); font-size: 0.85rem; line-height: 1.5; }
        .blog-post-body code { background: var(--bg-tertiary); padding: 0.2rem 0.4rem; border-radius: 3px; font-family: var(--font-mono); font-size: 0.9em; color: var(--accent-green); }
        .blog-post-body pre code { background: transparent; padding: 0; }
        .blog-post-body ul, .blog-post-body ol { margin: 1rem 0 1.5rem 1.5rem; }
        .blog-post-body li { margin-bottom: 0.5rem; }
        .blog-post-body a { color: var(--accent-blue); text-decoration: none; }
        .blog-post-body a:hover { text-decoration: underline; }
        .blog-tags { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem; }
        .blog-tag { font-family: var(--font-mono); font-size: 0.75rem; padding: 0.3rem 0.6rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 4px; color: var(--accent-blue); }
        .back-link { display: inline-flex; align-items: center; gap: 0.5rem; font-family: var(--font-mono); font-size: 0.9rem; color: var(--text-muted); text-decoration: none; margin-bottom: 2rem; transition: var(--transition-normal); }
        .back-link:hover { color: var(--accent-blue); }
        .technique-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
        .technique-card h3 { margin-top: 0; color: var(--accent-red); }
    </style>
</head>
<body>
    <!-- CRT Effect -->
    <div class="crt"></div>

    <!-- Grid Background -->
    <div class="grid-bg"></div>

    <!-- Classification Bar -->
    <div class="class-bar"></div>

    <!-- Tactical Frame -->
    <div class="tactical-frame"></div>
    <div class="tactical-frame-bottom"></div>

    <!-- Navigation -->
    <nav class="cyber-nav">
        <div class="nav-container">
            <div style="display: flex; align-items: center;">
                <a href="../../index.html" class="nav-logo">
                    <span class="logo-bracket">[</span>
                    <span class="logo-text">JL</span>
                    <span class="logo-bracket">]</span>
                </a>
                <span class="logo-tag">CYBER OPS</span>
            </div>
            <div class="nav-links">
                <a href="../../index.html" class="nav-link">./home</a>
                <a href="../about.html" class="nav-link">./whoami</a>
                <a href="../cyber-projects.html" class="nav-link">./cyberops</a>
                <a href="../projects.html" class="nav-link">./research</a>
                <a href="../blog.html" class="nav-link active">./intel</a>
                <a href="../contact.html" class="nav-link">./comms</a>
            </div>
            <button class="nav-toggle" aria-label="Toggle menu">
                <span></span><span></span><span></span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="page-content">
        <div class="blog-post-content">
            <a href="../blog.html" class="back-link">&larr; Back to Blog</a>

            <article>
                <header class="blog-post-header">
                    <h1 class="blog-post-title">Bash Scripting for Pentesting</h1>
                    <div class="blog-post-meta">
                        <span>Type: Technical Notes</span>
                        <span>Category: Scripting / Automation</span>
                    </div>
                    <div class="blog-tags">
                        <span class="blog-tag">Bash</span>
                        <span class="blog-tag">Scripting</span>
                        <span class="blog-tag">Automation</span>
                        <span class="blog-tag">OSCP</span>
                        <span class="blog-tag">Enumeration</span>
                    </div>
                </header>

                <div class="blog-post-body">
                    <p>If there was one thing that OSCP drills into above all else, it is the importance of enumeration. This further translates into the importance of balancing thorough enumeration with efficiency as time is certainly a limiting factor when you have 24 hours to take over an entire active directory domain and 3 separate systems.</p>

                    <p>This project was a way to gain hands-on knowledge of using bash in a practical application while also furthering enumeration efficiency in the course.</p>

                    <p><strong>Note:</strong> This script is tailored for the OSCP specifically and is extremely "loud" so may not be suitable for certain scenarios.</p>

                    <p>The main enumeration script: <a href="https://github.com/jeremylaratro/pentest_scripts/blob/main/start.sh" target="_blank">start.sh on GitHub</a></p>

                    <h2>Script Structure</h2>
                    <p>The script uses argument parsing with getopts and modular functions:</p>

                    <pre><code>#!/bin/bash

opts='i:d:x:nlbawshvf'
while getopts $opts arg; do
  case $arg in
    i ) ip=$OPTARG;;
    d ) domain=$OPTARG;;
    l ) lfi=1;;
    s ) sub=1;;
    w ) web=1;;
    n ) nmap=1;;
    f ) network=1;;
    a ) all=1;;
    b ) smb=1;;
    v ) exp=1;;
    h ) help=1;;
    * ) echo "unknown argument";;
  esac
done</code></pre>

                    <h2>Port Scanning</h2>
                    <p>Using rustscan for speed combined with nmap for detailed analysis:</p>

                    <pre><code>rustall() {
    echo " Starting full port scan.."
    rustscan -a $ip --ulimit 5000 -g > $rports
    cat $rports | awk '/->/{print $3}' | tr -d '[]' | tr "," "\n" |tr -d "^ " > $open
}

nmap_run() {
    ropen=$(cat $rports | awk '/->/{print $3}' | tr -d '[]')
    echo 'The following ports are open: '$ropen
    sudo nmap -sS -sC -vv -sV $ip -p "$(echo $ropen)" -oX $LOG2 -oG $LOGFILE
}</code></pre>

                    <h2>Web Discovery</h2>
                    <p>Automated web server detection and directory enumeration:</p>

                    <pre><code>search_discover() {
  while read port; do
    echo "Checking for webserver on: $ip:$port"
    httpx http://$ip:$port
    if (httpx http://$ip:$port | grep -q -Eo '200 OK'); then
        echo $port >> output/scan_$ip/webserv.txt
        whatweb http://$ip:$port
    fi
  done < output/scan_$ip/open.txt

  # Directory enumeration
  while read wport; do
    gospider -s http://$ip:$wport
    gobuster dir -u http://$ip:$wport --wordlist /usr/share/wordlists/SecLists-master/Discovery/Web-Content/raft-medium-directories.txt -x php,txt,js,html -o $web_out
  done < output/scan_$ip/webserv.txt
}</code></pre>

                    <h2>Exploit Discovery</h2>
                    <p>Automated searchsploit queries based on nmap results:</p>

                    <pre><code>searchspl() {
  ssh_() {
    if (cat $LOG2 | grep -q 'ssh'); then
      cat $LOG2 | grep 'ssh' | grep -o 'product=".*"' | cut -d \" -f2 | grep -o '^\S*'  > srch.txt
      cat $LOG2 | grep 'ssh' | grep -oE 'version="[0-9]?.[0-9]?.' | grep -Eo '[0-9]?.[0.9]..' >> srch.txt
      vv=$(cat srch.txt)
      echo 'Searching exploitdb for' $vv
      searchsploit $vv
    fi
  }
  ssh_
  # Similar functions for ftp, smb, web...
}</code></pre>

                    <h2>SMB Enumeration</h2>
                    <pre><code>smb_scan() {
  if grep -q -E '(^|, )139(,|$)|(^|, )445(,|$)' $rports; then
    echo "Found open SMB ports"
    enum4linux $ip
  else
    echo 'SMB not found'
  fi
}</code></pre>

                    <h2>Script Dependencies</h2>
                    <ul>
                        <li>rustscan</li>
                        <li>nmap</li>
                        <li>smbclient</li>
                        <li>gobuster</li>
                        <li>httpx</li>
                        <li>gospider</li>
                        <li>searchsploit</li>
                        <li>whatweb</li>
                        <li>dnsrecon</li>
                        <li>sublist3r</li>
                        <li>enum4linux</li>
                    </ul>

                    <h2>Usage Examples</h2>
                    <pre><code># Full scan with all options
./start.sh -i 10.10.x.x -a

# Specific scans
./start.sh -i 10.10.x.x -n -d example.com -v -b

# Web enumeration only
./start.sh -i 10.10.x.x -w</code></pre>

                </div>
            </article>
        </div>
    </main>

    <!-- Footer -->
    <footer class="cyber-footer">
        <div class="footer-content">
            <div class="footer-status">
                <span class="footer-dot"></span>
                <span>SYSTEMS ONLINE</span>
            </div>
            <div class="footer-links">
                <a href="https://github.com/jeremylaratro" target="_blank" class="footer-link">[GitHub]</a>
                <a href="https://www.linkedin.com/in/JeremyLaratro" target="_blank" class="footer-link">[LinkedIn]</a>
            </div>
            <div class="footer-copy">
                &copy; <span id="year"></span> // Secure Channel
            </div>
        </div>
    </footer>

    <script src="../../js/main.js"></script>
</body>
</html>
